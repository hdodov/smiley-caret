{"version":3,"sources":["../node_modules/browser-pack/_prelude.js","main/js/src/content.js","main/js/src/modules/dropdown.js","main/js/src/modules/element-watcher.js","main/js/src/modules/focus-watcher.js","main/js/src/modules/keys.js","main/js/src/modules/matcher.js","main/js/src/modules/replace.js","main/js/src/modules/shortcodes.js","main/js/src/modules/state.js","main/js/src/modules/string-buffer.js","main/js/src/modules/ui.js","main/js/src/modules/utils.js","../node_modules/d/index.js","../node_modules/es5-ext/function/noop.js","../node_modules/es5-ext/object/assign/index.js","../node_modules/es5-ext/object/assign/is-implemented.js","../node_modules/es5-ext/object/assign/shim.js","../node_modules/es5-ext/object/is-callable.js","../node_modules/es5-ext/object/is-value.js","../node_modules/es5-ext/object/keys/index.js","../node_modules/es5-ext/object/keys/is-implemented.js","../node_modules/es5-ext/object/keys/shim.js","../node_modules/es5-ext/object/normalize-options.js","../node_modules/es5-ext/object/valid-callable.js","../node_modules/es5-ext/object/valid-value.js","../node_modules/es5-ext/string/#/contains/index.js","../node_modules/es5-ext/string/#/contains/is-implemented.js","../node_modules/es5-ext/string/#/contains/shim.js","../node_modules/event-emitter/index.js","../node_modules/smiley-caret-data/shortcodes.js","../node_modules/textarea-caret/index.js","../node_modules/twemoji/2/twemoji.npm.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","Utils","UI","FocusWatcher","ElementWatcher","StringBuffer","Matcher","replace","State","on","element","isElementEmojiEligible","changeElement","clear","handleKeyDown","event","handleKeyPress","setTimeout","dropdownAction","dropdown","alignTo","target","removeDropdown","reset","checkMatch","buffer","getBehavior","update","flags","colonStart","dropdownExists","createDropdown","codes","show","updateList","hide","Dropdown","parent","this","items","selectedItem","document","body","createElement","classList","add","container","appendChild","EventEmitter","Twemoji","prototype","createItem","name","emoji","item","emojiElem","emojiElemChar","emojiElemImg","nameElem","createTextNode","imageMarkup","parse","imageSrcMatch","exec","imageSrc","tempImage","Image","onload","src","smileyCaret","self","addEventListener","selectItem","chooseItem","preventDefault","stopImmediatePropagation","emit","remove","list","k","parentNode","removeChild","exists","firstElementChild","elem","offset","getElementCaretOffset","style","left","top","fixed","active","destroy","destroyed","Element","domElement","boundEvents","MONITORED_EVENTS","addEvent","key","callback","push","clearEvents","removeEventListener","splice","_currentElem","domEmitter","lastDomElement","newDomElement","type","_initializeElement","getElement","emitter","_focusedElement","setInterval","activeElement","up","right","down","backspace","tab","enter","escape","space","isArrowKey","Shortcodes","resetFlags","_flags","shortcode","coloncode","updateColoncodes","data","_coloncodes","get","match","isPartOfColoncode","isPart","updateFlags","allDown","flagsDown","chrome","runtime","sendMessage","id","search","searchForColoncodes","getBuffer","copyBehavior","hasAttribute","clipWithSelection","searchSelection","result","range","selection","getRangeAt","rangeCount","setStart","node","start","setEnd","end","deleteContents","insertNode","normalize","parentElement","collapseToEnd","searchInput","selectionStart","selectionEnd","value","before","after","_sets","sets","indexOf","getSets","str","getAll","_behavior","shortcodes","coloncodes","copy","setBehavior","silent","window","location","hostname","storage","local","onMessage","addListener","request","sender","respond","Keys","change","mutator","cache","_buffer","which","getSelection","slice","Replace","_dropdown","getCaretCoordinates","endIndex","startIndex","substring","focusNode","nodeValue","focusOffset","isElementEditable","tagName","forbidden","getAttribute","getElementBodyOffset","viewportOffset","getBoundingClientRect","scrollTop","documentElement","scrollLeft","offsetElem","computed","getComputedStyle","position","offsetParent","clonedRange","cloneRange","caretOffset","clipWithInput","text","input","stopPropagation","select","execCommand","createRange","clone","removeAllRanges","selectNodeContents","addRange","assign","normalizeOpts","isCallable","contains","dscr","c","w","options","desc","arguments","configurable","enumerable","writable","gs","set","undefined","Object","obj","foo","bar","trzy","keys","max","Math","dest","error","forEach","_undefined","val","isValue","object","Array","create","opts1","process","fn","TypeError","String","searchString","once","off","methods","descriptors","base","d","callable","apply","Function","defineProperty","defineProperties","hasOwnProperty","descriptor","listener","__ee__","__eeOnceListener__","listeners","candidate","args",":D","':D","xD",";)","^^",":p","8)",":*",":3",":)",":?",":|","-_-",":x",":X","|-(",":O",":o","D:","|-)",":P",";P",":/","(:","8O",":(",";(",":@",">:)","<3","isBrowser","debug","el","querySelector","div","currentStyle","whiteSpace","nodeName","wordWrap","visibility","properties","prop","isFirefox","scrollHeight","parseInt","height","overflowY","overflow","textContent","span","coordinates","offsetTop","offsetLeft","backgroundColor","mozInnerScreenX","global","twemoji","createText","clean","UFE0Fg","escapeHTML","rescaper","replacer","grabAllTextNodes","allText","subnode","nodeType","childNodes","shouldntBeParsed","test","toLowerCase","grabTheRightIcon","rawText","toCodePoint","U200D","m","escaper","re","unicodeSurrogates","sep","p","charCodeAt","toString","join","ext","size","className","convert","fromCodePoint","codepoint","fromCharCode","onerror","replaceChild","alt","what","how","attrib","attrname","ret","iconId","concat","attributes","modified","fragment","index","img","createDocumentFragment","setAttribute","icon","folder","toSizeSquaredAsset","lastIndex","&","<",">","'","\"","protocol"],"mappings":"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","file":"content.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","// ---\r\n// add keywords when searching\r\n// fix dropdown positioning when it's too close to the edge (facebook chat search)\r\n\r\nvar Utils = require('./modules/utils.js');\r\nvar UI = require('./modules/ui.js');\r\nvar FocusWatcher = require('./modules/focus-watcher.js');\r\nvar ElementWatcher = require('./modules/element-watcher.js');\r\nvar StringBuffer = require('./modules/string-buffer.js');\r\nvar Matcher = require('./modules/matcher.js');\r\nvar replace = require('./modules/replace.js');\r\nvar State = require('./modules/State.js');\r\n\r\nFocusWatcher.on('change', function (element) {\r\n    if (Utils.isElementEmojiEligible(element)) {\r\n        ElementWatcher.changeElement(element);\r\n    } else {\r\n        ElementWatcher.changeElement(null);\r\n    }\r\n});\r\n\r\nElementWatcher.on('rebind', StringBuffer.clear);\r\nElementWatcher.element.on('keydown', StringBuffer.handleKeyDown);\r\n\r\nElementWatcher.element.on('keypress', function (event) {\r\n    StringBuffer.handleKeyPress(event);\r\n\r\n    setTimeout(function () {\r\n        // Timeout needed because otherwise the positioning happens before\r\n        // the character is inserted.\r\n        UI.dropdownAction(function (dropdown) {\r\n            dropdown.alignTo(event.target);\r\n        });\r\n    }, 0);\r\n});\r\n\r\nElementWatcher.element.on('keyup', function (event, element) {\r\n    UI.dropdownAction(function (dropdown) {\r\n        dropdown.alignTo(event.target);\r\n    });\r\n});\r\n\r\nElementWatcher.element.on('blur', StringBuffer.clear);\r\nElementWatcher.element.on('click', StringBuffer.clear);\r\n\r\nStringBuffer.on('clear', function () {\r\n    UI.removeDropdown();\r\n    Matcher.reset();\r\n});\r\n\r\nStringBuffer.on('break', Matcher.checkMatch);\r\n\r\nStringBuffer.on('change', function (buffer) {\r\n    if (State.getBehavior('active')) {\r\n        Matcher.update(buffer);\r\n    }\r\n});\r\n\r\nMatcher.on('flags_update', function (flags) {\r\n    if (flags.colonStart && !UI.dropdownExists()) {\r\n        UI.createDropdown();\r\n    }\r\n});\r\n\r\nMatcher.on('coloncode_update', function (codes) {\r\n    if (codes && codes.length) {\r\n        UI.dropdownAction(function (dropdown) {\r\n            dropdown.show();\r\n            dropdown.updateList(codes);\r\n        });\r\n    } else {\r\n        UI.dropdownAction(function (dropdown) {\r\n            dropdown.hide();\r\n        });\r\n    }\r\n});\r\n\r\nMatcher.on('match', replace);\r\nMatcher.on('flags_down', StringBuffer.clear);\r\n\r\nrequire('./modules/state.js');","var EventEmitter = require('event-emitter');\r\nvar Twemoji = require('twemoji');\r\nvar Utils = require('./utils.js');\r\nvar State = require('./State.js');\r\n\r\nfunction Dropdown(parent) {\r\n    this.items = {};\r\n    this.selectedItem = null;\r\n    this.parent = parent || document.body;\r\n\r\n    this.dropdown = document.createElement(\"div\");\r\n    this.dropdown.classList.add(\"smiley-caret-dropdown\");\r\n\r\n    this.container = document.createElement(\"div\");\r\n    this.container.classList.add(\"smiley-caret-container\");\r\n    this.dropdown.appendChild(this.container);\r\n\r\n    if (State.getBehavior('copy')) {\r\n        this.container.classList.add(\"behavior-copy\");\r\n    }\r\n\r\n    this.parent.appendChild(this.dropdown);\r\n} Dropdown.prototype = {\r\n    createItem: function (name, emoji) {\r\n        if (this.items[name]) return;\r\n\r\n        var item = document.createElement(\"div\");\r\n        var emojiElem = document.createElement(\"span\");\r\n        var emojiElemChar = document.createElement(\"i\");\r\n        var emojiElemImg = document.createElement(\"img\");\r\n        var nameElem = document.createElement(\"p\");\r\n\r\n        emojiElemChar.appendChild(document.createTextNode(emoji));\r\n        emojiElem.appendChild(emojiElemChar);\r\n        emojiElem.appendChild(emojiElemImg);\r\n\r\n        var imageMarkup = Twemoji.parse(emoji)\r\n        ,   imageSrcMatch = /src\\=\\\"(.*)\\\"/.exec(imageMarkup)\r\n        ,   imageSrc = (imageSrcMatch && imageSrcMatch[1]);\r\n        \r\n        if (imageSrc) {\r\n            var tempImage = new Image();\r\n            tempImage.onload = function () {\r\n                emojiElem.classList.add(\"is-loaded\");\r\n            };\r\n\r\n            tempImage.src = imageSrc;\r\n            emojiElemImg.src = imageSrc;\r\n        }\r\n\r\n        item.appendChild(emojiElem);\r\n\r\n        nameElem.appendChild(document.createTextNode(name));\r\n        item.appendChild(nameElem);\r\n\r\n        item.smileyCaret = {\r\n            emoji: emoji,\r\n            name: name\r\n        };\r\n\r\n        var self = this;\r\n        item.addEventListener(\"mouseenter\", function () {\r\n            self.selectItem(this);\r\n        });\r\n\r\n        item.addEventListener(\"mousedown\", function (event) {\r\n            self.selectItem(this);\r\n            self.chooseItem();\r\n            event.preventDefault(); // to prevent loss of focus\r\n            event.stopImmediatePropagation();\r\n        });\r\n\r\n        this.container.appendChild(item);\r\n        this.items[name] = item;\r\n    },\r\n\r\n    chooseItem: function () {\r\n        if (\r\n            this.selectedItem &&\r\n            this.selectedItem.smileyCaret &&\r\n            this.selectedItem.smileyCaret.emoji\r\n        ) {\r\n            this.emit('choose', this.selectedItem.smileyCaret.emoji);\r\n        }  \r\n    },\r\n\r\n    selectItem: function (item) {\r\n        if (this.selectedItem) {\r\n            this.selectedItem.classList.remove(\"selected\");\r\n            this.selectedItem = null;\r\n        }\r\n\r\n        if (item) {\r\n            item.classList.add(\"selected\");\r\n            this.selectedItem = item;\r\n        }\r\n    },\r\n\r\n    updateList: function (list) {\r\n        if (list.length === 0) return;\r\n\r\n        for (var k in this.items) {\r\n            this.items[k].parentNode.removeChild(this.items[k]);\r\n\r\n            var exists = false;\r\n            for (var i = 0; i < list.length; i++) {\r\n                if (list[i][1] === k) {\r\n                    exists = true;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (!exists) {\r\n                delete this.items[k];\r\n            }\r\n        }\r\n\r\n        for (var i = 0; i < list.length; i++) {\r\n            var emoji = list[i][0]\r\n            ,   name = list[i][1];\r\n\r\n            if (this.items[name]) {\r\n                this.container.appendChild(this.items[name]);\r\n            } else {\r\n                this.createItem(name, emoji);\r\n            }\r\n        }\r\n\r\n        if (this.container.firstElementChild) {\r\n            this.selectItem(this.container.firstElementChild);\r\n        }\r\n    },\r\n\r\n    alignTo: function (elem) {\r\n        var offset = Utils.getElementCaretOffset(elem);\r\n\r\n        if (offset) {\r\n            this.dropdown.style.left = offset.left + \"px\";\r\n            this.dropdown.style.top = offset.top + \"px\";\r\n\r\n            if (offset.fixed) {\r\n                this.dropdown.classList.add(\"is-fixed\");\r\n            } else {\r\n                this.dropdown.classList.remove(\"is-fixed\");\r\n            }\r\n        }\r\n    },\r\n\r\n    show: function () {\r\n        this.active = true;\r\n        this.dropdown.classList.add(\"is-visible\");\r\n    },\r\n\r\n    hide: function () {\r\n        this.active = false;\r\n        this.dropdown.classList.remove(\"is-visible\");\r\n    },\r\n\r\n    remove: function () {\r\n        this.hide();\r\n\r\n        var self = this;\r\n        setTimeout(function () {\r\n            self.destroy();\r\n        }, 500);\r\n    },\r\n\r\n    destroy: function () {\r\n        if (this.destroyed) return;\r\n        \r\n        if (this.dropdown.parentNode) {\r\n            this.dropdown.parentNode.removeChild(this.dropdown);\r\n        }\r\n\r\n        this.parent = null;\r\n        this.items = null;\r\n        this.selectedItem = null;\r\n        this.dropdown = null;\r\n        this.container = null;\r\n\r\n        this.destroyed = true;\r\n    }\r\n};\r\n\r\nEventEmitter(Dropdown.prototype);\r\nmodule.exports = Dropdown;","// The user can only type in one element at once. We’re interested in\r\n// receiving all keyboard events, no matter the element. This module does\r\n// that. It handles the change from one element to another by internally\r\n// switching listeners and exposing a single emitter that emits events.\r\n\r\nvar EventEmitter = require('event-emitter');\r\nvar MONITORED_EVENTS = [\r\n    'keydown',\r\n    'keypress',\r\n    'keyup',\r\n    'blur',\r\n    'click'\r\n];\r\n\r\nfunction Element(domElement) {\r\n    this.domElement = domElement;\r\n    this.boundEvents = [];\r\n} Element.prototype = {\r\n    addEvent: function (key, callback) {\r\n        this.domElement.addEventListener(key, callback);\r\n        this.boundEvents.push([key, callback]);\r\n    },\r\n\r\n    clearEvents: function () {\r\n        for (var i = this.boundEvents.length - 1; i >= 0; i--) {\r\n            var event = this.boundEvents[i];\r\n\r\n            this.domElement.removeEventListener(event[0], event[1]);\r\n            this.boundEvents.splice(i, 1);\r\n        }\r\n    },\r\n\r\n    destroy: function () {\r\n        if (this.destroyed) return;\r\n\r\n        this.clearEvents();\r\n        this.domElement = null;\r\n        this.boundEvents = null;\r\n        this.destroyed = true;\r\n    }\r\n};\r\n\r\nvar ElementWatcher = (function () {\r\n    var _currentElem = null;\r\n    var domEmitter = EventEmitter();\r\n\r\n    function _initializeElement(element) {\r\n        for (var i = 0; i < MONITORED_EVENTS.length; i++) {\r\n            element.addEvent(MONITORED_EVENTS[i], function (event) {\r\n                domEmitter.emit(event.type, event);\r\n            });\r\n        }\r\n    }\r\n\r\n    exports.changeElement = function (domElement) {\r\n        var lastDomElement = null\r\n        ,   newDomElement = null;\r\n\r\n        if (_currentElem) {\r\n            lastDomElement = _currentElem.domElement;\r\n            _currentElem.destroy();\r\n            _currentElem = null;\r\n        }\r\n\r\n        if (domElement) {\r\n            _currentElem = new Element(domElement);\r\n            _initializeElement(_currentElem);\r\n            newDomElement = _currentElem.domElement;\r\n        }\r\n        \r\n        exports.emit('rebind', newDomElement, lastDomElement);\r\n    };\r\n\r\n    exports.getElement = function () {\r\n        return (_currentElem && _currentElem.domElement);\r\n    };\r\n\r\n    exports.element = domEmitter;\r\n\r\n    return exports;\r\n})();\r\n\r\nEventEmitter(ElementWatcher);\r\nmodule.exports = ElementWatcher;","// Checks the currently focused element over short interval and dispatches\r\n// changes. The \"focusin\" event can't do the job because it can be cancelled.\r\n\r\nvar EventEmitter = require('event-emitter');\r\nvar INTERVAL = 400;\r\n\r\nvar emitter = EventEmitter();\r\nvar _focusedElement = null;\r\n\r\nsetInterval(function () {\r\n    if (document.activeElement !== _focusedElement) {\r\n        _focusedElement = document.activeElement;\r\n        emitter.emit('change', _focusedElement);\r\n    }\r\n}, INTERVAL);\r\n\r\nmodule.exports = emitter;","module.exports = {\r\n    codes: {\r\n        left:   37,\r\n        up:     38,\r\n        right:  39,\r\n        down:   40,\r\n\r\n        backspace:  8,\r\n        tab:        9,\r\n        enter:      13,\r\n        escape:     27,\r\n        space:      32\r\n    },\r\n\r\n    isArrowKey: function (code) {\r\n        return code >= this.codes.left && code <= this.codes.down;\r\n    }\r\n};","var EventEmitter = require('event-emitter');\r\nvar Shortcodes = require('./shortcodes.js');\r\nvar State = require('./state.js');\r\n\r\nmodule.exports = (function () {\r\n    var exports = EventEmitter();\r\n\r\n    var _flags = {},\r\n        _coloncodes = [];\r\n\r\n    function resetFlags() {\r\n        _flags.shortcode = false;\r\n        _flags.colonStart = false;\r\n        _flags.coloncode = false;\r\n        exports.emit('flags_update', _flags);\r\n    }\r\n\r\n    function updateColoncodes(data) {\r\n        _coloncodes = data || [];\r\n        exports.emit('coloncode_update', _coloncodes);\r\n    }\r\n\r\n    function searchForColoncodes(buffer) {\r\n        chrome.runtime.sendMessage({\r\n            id: \"get_coloncodes\",\r\n            search: buffer\r\n        }, function (data) {\r\n            updateColoncodes(data);\r\n        });\r\n    }\r\n\r\n    function flagsDown() {\r\n        var allDown = true;\r\n\r\n        if (\r\n            _flags.shortcode !== false ||\r\n            _flags.colonStart === true || \r\n            _flags.coloncode !== false\r\n        ) {\r\n            allDown = false;\r\n        }\r\n\r\n        return allDown;\r\n    }\r\n\r\n    function isPartOfColoncode(buffer) {\r\n        var match = buffer.match(/^\\:([a-z0-9\\-]{3,})\\:?$/);\r\n\r\n        if (match !== null && match.length) {\r\n            return match[1];\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    function updateFlags(buffer) {\r\n        if (State.getBehavior('coloncodes')) {\r\n            if (buffer.length === 1 && buffer[0] === \":\") {\r\n                _flags.colonStart = true;\r\n            }\r\n\r\n            if (_flags.colonStart) {\r\n                _flags.coloncode = isPartOfColoncode(buffer);\r\n            }\r\n        }\r\n\r\n        if (State.getBehavior('shortcodes')) {\r\n            _flags.shortcode = Shortcodes.isPart(buffer) ? buffer : false;\r\n        }\r\n\r\n        exports.emit('flags_update', _flags);\r\n    }\r\n\r\n    exports.reset = function () {\r\n        resetFlags();\r\n        updateColoncodes(null);\r\n    };\r\n\r\n    exports.checkMatch = function () {\r\n        if (_flags.shortcode) {\r\n            var shortcode = Shortcodes.get(_flags.shortcode);\r\n\r\n            if (shortcode !== null) {\r\n                exports.emit('match', shortcode);\r\n            }\r\n        }\r\n\r\n        if (_flags.coloncode) {\r\n            for (var i = 0; i < _coloncodes.length; i++) {\r\n                if (_coloncodes[i][1] === _flags.coloncode) {\r\n                    exports.emit('match', _coloncodes[i][0]);\r\n                }\r\n            }\r\n        }   \r\n    };\r\n\r\n    exports.update = function (buffer) {\r\n        updateFlags(buffer);\r\n\r\n        if (flagsDown()) {\r\n            exports.emit('flags_down');\r\n        } else {\r\n            if (_flags.coloncode) {\r\n                searchForColoncodes(_flags.coloncode);\r\n            } else {\r\n                updateColoncodes(null);\r\n            }\r\n        }\r\n    };\r\n\r\n    resetFlags();\r\n\r\n    return exports;\r\n})();","var State = require('./state.js');\r\nvar Utils = require('./utils.js');\r\nvar ElementWatcher = require('./element-watcher.js');\r\nvar StringBuffer = require('./string-buffer.js');\r\n\r\nmodule.exports = function (emoji) {\r\n    var element = ElementWatcher.getElement();\r\n    var search = StringBuffer.getBuffer();\r\n    var copyBehavior = State.getBehavior('copy');\r\n\r\n    if (!element) {\r\n        return false;\r\n    }\r\n\r\n    if (element.hasAttribute(\"contenteditable\")) {\r\n        if (copyBehavior) {\r\n            Utils.clipWithSelection(emoji);\r\n        }\r\n\r\n        Utils.searchSelection(search, function (result) {\r\n            var range = result.selection.getRangeAt(result.selection.rangeCount - 1);\r\n            range.setStart(result.node, result.start);\r\n            range.setEnd(result.node, result.end);\r\n\r\n            // If the behavior is copy, it should only select the match. If\r\n            // it’s not - it should also replace it with the emoji.\r\n            if (!copyBehavior) {\r\n                range.deleteContents();\r\n                range.insertNode(document.createTextNode(emoji));\r\n\r\n                result.node.parentNode.normalize();\r\n                result.node.parentElement.normalize();\r\n                result.selection.collapseToEnd();\r\n            }\r\n        });\r\n    } else {\r\n        Utils.searchInput(element, search, function (result) {\r\n            if (copyBehavior) {\r\n                // clipWithSelection() removes the caret position, so it must\r\n                // be done after the start and end of the match is found, I.E.\r\n                // in the callback.\r\n                Utils.clipWithSelection(emoji);\r\n\r\n                element.selectionStart = result.start;\r\n                element.selectionEnd = result.end;\r\n            } else {\r\n                element.value = result.before + emoji + result.after;\r\n                element.selectionEnd = result.before.length + emoji.length;\r\n            }\r\n        });\r\n    }\r\n\r\n    StringBuffer.clear();\r\n};","var Shortcodes = require('smiley-caret-data/shortcodes');\r\n\r\nmodule.exports = (function () {\r\n    var exports = {};\r\n\r\n    var _sets = getSets(Shortcodes);\r\n\r\n    function getSets(list) {\r\n        var sets = [];\r\n\r\n        for (var code in list) {\r\n            for (var i = 0; i < code.length; i++) {\r\n                sets[i] = sets[i] || [];\r\n\r\n                if (sets[i].indexOf(code[i]) === -1) {\r\n                    sets[i].push(code[i]);\r\n                }\r\n            }\r\n        }\r\n\r\n        return sets;\r\n    }\r\n\r\n    exports.isPart = function (str) {\r\n        for (var i = str.length - 1; i >= 0; i--) {\r\n            if (!_sets[i] || _sets[i].indexOf(str[i]) === -1) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return true;\r\n    };\r\n\r\n    exports.get = function (key) {\r\n        if (Shortcodes[key]) {\r\n            return Shortcodes[key];\r\n        } else {\r\n            return null;\r\n        }\r\n    };\r\n\r\n    exports.getAll = function () {\r\n        return Shortcodes;\r\n    };\r\n\r\n    return exports;\r\n})();","var EventEmitter = require('event-emitter');\r\n\r\nvar _behavior = {\r\n    active: true,\r\n    shortcodes: true,\r\n    coloncodes: true,\r\n    copy: false\r\n};\r\n\r\nmodule.exports = (function () {\r\n    var exports = EventEmitter();\r\n\r\n    exports.getBehavior = function (key) {\r\n        return _behavior[key];\r\n    };\r\n\r\n    exports.setBehavior = function (data, silent) {\r\n        for (var k in data) {\r\n            if (k in _behavior && data[k] !== _behavior[k]) {\r\n                _behavior[k] = data[k];\r\n\r\n                if (!silent) {\r\n                    exports.emit(\"behavior_change\", k, _behavior[k]);\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    return exports;\r\n})();\r\n\r\n// Turn off replacing functionality because facebook is a pain in the ass.\r\nif (window.location.hostname.indexOf('facebook') !== -1) {\r\n    module.exports.setBehavior({\r\n        copy: true,\r\n        shortcodes: false\r\n    }, true);\r\n}\r\n\r\nchrome.storage.local.get({\r\n    active: true\r\n}, function (data) {\r\n    module.exports.setBehavior({\r\n        active: !!data.active\r\n    });\r\n});\r\n\r\nchrome.runtime.onMessage.addListener(function (request, sender, respond) {\r\n    if (request.id == \"update_behavior\") {\r\n        module.exports.setBehavior(request.data);\r\n    }\r\n});","var EventEmitter = require('event-emitter');\r\nvar State = require('./state.js');\r\nvar Utils = require('./utils.js');\r\nvar Keys = require('./keys.js');\r\n\r\nmodule.exports = (function () {\r\n    var exports = EventEmitter();\r\n\r\n    var _buffer = \"\";\r\n\r\n    function change(mutator, silent) {\r\n        var cache = _buffer;\r\n        _buffer = mutator(_buffer);\r\n\r\n        if (\r\n            _buffer !== cache &&\r\n            typeof _buffer == \"string\"\r\n        ) {\r\n            if (silent !== true) {\r\n                exports.emit('change', _buffer, cache);\r\n            }\r\n\r\n            if (_buffer.length === 0) {\r\n                exports.emit('clear');\r\n            }\r\n        }\r\n    }\r\n\r\n    exports.clear = function () {\r\n        change(function () {\r\n            return \"\";\r\n        }, true);\r\n    };\r\n\r\n    exports.handleKeyPress = function (event) {\r\n        change(function (buffer) {\r\n            if (event.which !== Keys.codes.space) {\r\n                return buffer + event.key;\r\n            } else {\r\n                return buffer;\r\n            }\r\n        });\r\n    };\r\n\r\n    exports.handleKeyDown = function (event) {\r\n        if (\r\n            event.which === Keys.codes.enter ||\r\n            event.which === Keys.codes.space\r\n        ) {\r\n            exports.emit('break', _buffer);\r\n            exports.clear();\r\n            return;\r\n        }\r\n\r\n        //                              selection is not a single character (ctrl+A)\r\n        if (Keys.isArrowKey(event.which) || !(window.getSelection().isCollapsed)) {\r\n            exports.clear();\r\n            return;\r\n        }\r\n\r\n        if (event.which === Keys.codes.backspace) {\r\n            change(function (buffer) {\r\n                return buffer.slice(0, -1);\r\n            });\r\n        }\r\n    };\r\n\r\n    exports.getBuffer = function () {\r\n        return _buffer;\r\n    };\r\n\r\n    return exports;\r\n})();\r\n\r\nState.on('behavior_change', function (key, value) {\r\n    if (key == 'active' && value == false) {\r\n        module.exports.clear();\r\n    }\r\n});","var Dropdown = require('./dropdown.js');\r\nvar Replace = require('./replace.js');\r\n\r\nmodule.exports = (function () {\r\n    var exports = {};\r\n\r\n    var _dropdown = null;\r\n\r\n    function exists() {\r\n        return (\r\n            _dropdown &&\r\n            _dropdown instanceof Dropdown &&\r\n            !_dropdown.destroyed\r\n        );\r\n    }\r\n\r\n    exports.createDropdown = function () {\r\n        if (!exists()) {\r\n            _dropdown = new Dropdown();\r\n            _dropdown.on('choose', function (emoji) {\r\n                Replace(emoji, true);\r\n            });\r\n        }\r\n    };\r\n\r\n    exports.dropdownAction = function (callback) {\r\n        if (exists()) {\r\n            callback(_dropdown);\r\n        }\r\n    };\r\n\r\n    exports.removeDropdown = function () {\r\n        if (exists()) {\r\n            _dropdown.remove();\r\n            _dropdown = null;\r\n        }\r\n    };\r\n\r\n    exports.dropdownExists = exists;\r\n\r\n    return exports;\r\n})();","var getCaretCoordinates = require('textarea-caret');\r\n\r\nmodule.exports = {\r\n    searchInput: function (elem, search, callback) {\r\n        if (\r\n            !elem ||\r\n            typeof elem.value != \"string\" ||\r\n            typeof elem.selectionEnd != \"number\"\r\n        ) {\r\n            return false;\r\n        }\r\n\r\n        var value = elem.value\r\n        ,   endIndex = elem.selectionEnd\r\n        ,   startIndex = endIndex - search.length;\r\n\r\n        if (\r\n            startIndex < 0 ||\r\n            endIndex < startIndex ||\r\n            value.substring(startIndex, endIndex) != search\r\n        ) {\r\n            return false;\r\n        }\r\n\r\n        return callback({\r\n            start: startIndex,\r\n            end: endIndex,\r\n            before: value.substring(0, startIndex),\r\n            after: value.substring(endIndex)\r\n        });\r\n    },\r\n\r\n    searchSelection: function (search, callback) {\r\n        var selection = window.getSelection();\r\n\r\n        if (\r\n            !selection ||\r\n            !selection.focusNode ||\r\n            !selection.focusNode.nodeValue\r\n        ) {\r\n            return false;\r\n        }\r\n\r\n        var node = selection.focusNode\r\n        ,   endIndex = selection.focusOffset\r\n        ,   startIndex = endIndex - search.length;\r\n\r\n        if (\r\n            startIndex < 0 ||\r\n            endIndex < startIndex ||\r\n            selection.rangeCount == 0 ||\r\n            node.nodeValue.substring(startIndex, endIndex) != search\r\n        ) {\r\n            return false;\r\n        }\r\n\r\n        return callback({\r\n            selection: selection,\r\n            node: node,\r\n            start: startIndex,\r\n            end: endIndex\r\n        });\r\n    },\r\n\r\n    isElementEditable: function (elem) {\r\n        return (elem && (\r\n            elem.hasAttribute(\"contenteditable\") ||\r\n            elem.tagName === \"TEXTAREA\" ||\r\n            elem.tagName === \"INPUT\"\r\n        ));\r\n    },\r\n\r\n    isElementEmojiEligible: function (elem) {\r\n        var forbidden = [\"email\", \"password\", \"tel\"]\r\n        ,   type = elem.getAttribute(\"type\")\r\n        ,   name = elem.getAttribute(\"name\");\r\n\r\n        return (\r\n            this.isElementEditable(elem) &&\r\n            forbidden.indexOf(type) == -1 &&\r\n            forbidden.indexOf(name) == -1\r\n        );\r\n    },\r\n\r\n    getElementBodyOffset: function (elem) {\r\n        var viewportOffset = elem.getBoundingClientRect()\r\n        ,   scrollTop = document.documentElement.scrollTop + document.body.scrollTop\r\n        ,   scrollLeft = document.documentElement.scrollLeft + document.body.scrollLeft\r\n        ,   offsetElem = elem\r\n        ,   result = {\r\n                top: 0,\r\n                left: 0,\r\n                fixed: false\r\n            };\r\n\r\n        do {\r\n            var computed = window.getComputedStyle(offsetElem);\r\n\r\n            if (computed && computed.position == \"fixed\") {\r\n                result.fixed = true;\r\n                break;\r\n            }\r\n        } while (offsetElem = offsetElem.offsetParent);\r\n\r\n        result.top = viewportOffset.top;\r\n        result.left = viewportOffset.left;\r\n\r\n        if (!result.fixed) {\r\n            result.top += scrollTop;\r\n            result.left += scrollLeft;\r\n        }\r\n\r\n        return result;\r\n    },\r\n\r\n    getElementCaretOffset: function (elem) {\r\n        var offset = null;\r\n\r\n        if (elem.hasAttribute('contenteditable')) {\r\n            var selection = window.getSelection()\r\n            ,   range = selection.getRangeAt(selection.rangeCount - 1)\r\n            ,   clonedRange = range.cloneRange();\r\n\r\n            var node = document.createElement('span');\r\n            clonedRange.insertNode(node);\r\n\r\n            offset = this.getElementBodyOffset(node);\r\n\r\n            var parent = node.parentNode;\r\n            parent.removeChild(node);\r\n            parent.normalize();\r\n        } else {\r\n            offset = this.getElementBodyOffset(elem);\r\n\r\n            var caretOffset = getCaretCoordinates(elem, elem.selectionEnd);\r\n            offset.top += caretOffset.top - elem.scrollTop;\r\n            offset.left += caretOffset.left;\r\n        }\r\n\r\n        return offset;\r\n    },\r\n\r\n    clipWithInput: function (text) {\r\n        var input = document.createElement(\"input\");\r\n        document.body.appendChild(input);\r\n\r\n        input.addEventListener(\"focus\", function (e) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n        });\r\n\r\n        input.value = text;\r\n        input.select();\r\n\r\n        document.execCommand(\"copy\");\r\n        document.body.removeChild(input);\r\n    },\r\n\r\n    clipWithSelection: function (text) {\r\n        var node = document.createTextNode(text),\r\n            selection = window.getSelection(),\r\n            range = document.createRange(),\r\n            clone = null;\r\n\r\n        if (selection.rangeCount > 0) {\r\n            clone = selection.getRangeAt(selection.rangeCount - 1).cloneRange();\r\n        }\r\n\r\n        document.body.appendChild(node);\r\n        selection.removeAllRanges();\r\n        range.selectNodeContents(node);\r\n        selection.addRange(range);\r\n        document.execCommand(\"copy\");\r\n\r\n        selection.removeAllRanges();\r\n        document.body.removeChild(node);\r\n\r\n        if (clone !== null) {\r\n            selection.addRange(clone);\r\n        }\r\n    }\r\n};","'use strict';\n\nvar assign        = require('es5-ext/object/assign')\n  , normalizeOpts = require('es5-ext/object/normalize-options')\n  , isCallable    = require('es5-ext/object/is-callable')\n  , contains      = require('es5-ext/string/#/contains')\n\n  , d;\n\nd = module.exports = function (dscr, value/*, options*/) {\n\tvar c, e, w, options, desc;\n\tif ((arguments.length < 2) || (typeof dscr !== 'string')) {\n\t\toptions = value;\n\t\tvalue = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[2];\n\t}\n\tif (dscr == null) {\n\t\tc = w = true;\n\t\te = false;\n\t} else {\n\t\tc = contains.call(dscr, 'c');\n\t\te = contains.call(dscr, 'e');\n\t\tw = contains.call(dscr, 'w');\n\t}\n\n\tdesc = { value: value, configurable: c, enumerable: e, writable: w };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n\nd.gs = function (dscr, get, set/*, options*/) {\n\tvar c, e, options, desc;\n\tif (typeof dscr !== 'string') {\n\t\toptions = set;\n\t\tset = get;\n\t\tget = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[3];\n\t}\n\tif (get == null) {\n\t\tget = undefined;\n\t} else if (!isCallable(get)) {\n\t\toptions = get;\n\t\tget = set = undefined;\n\t} else if (set == null) {\n\t\tset = undefined;\n\t} else if (!isCallable(set)) {\n\t\toptions = set;\n\t\tset = undefined;\n\t}\n\tif (dscr == null) {\n\t\tc = true;\n\t\te = false;\n\t} else {\n\t\tc = contains.call(dscr, 'c');\n\t\te = contains.call(dscr, 'e');\n\t}\n\n\tdesc = { get: get, set: set, configurable: c, enumerable: e };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n","\"use strict\";\n\n// eslint-disable-next-line no-empty-function\nmodule.exports = function () {};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")()\n\t? Object.assign\n\t: require(\"./shim\");\n","\"use strict\";\n\nmodule.exports = function () {\n\tvar assign = Object.assign, obj;\n\tif (typeof assign !== \"function\") return false;\n\tobj = { foo: \"raz\" };\n\tassign(obj, { bar: \"dwa\" }, { trzy: \"trzy\" });\n\treturn (obj.foo + obj.bar + obj.trzy) === \"razdwatrzy\";\n};\n","\"use strict\";\n\nvar keys  = require(\"../keys\")\n  , value = require(\"../valid-value\")\n  , max   = Math.max;\n\nmodule.exports = function (dest, src /*, …srcn*/) {\n\tvar error, i, length = max(arguments.length, 2), assign;\n\tdest = Object(value(dest));\n\tassign = function (key) {\n\t\ttry {\n\t\t\tdest[key] = src[key];\n\t\t} catch (e) {\n\t\t\tif (!error) error = e;\n\t\t}\n\t};\n\tfor (i = 1; i < length; ++i) {\n\t\tsrc = arguments[i];\n\t\tkeys(src).forEach(assign);\n\t}\n\tif (error !== undefined) throw error;\n\treturn dest;\n};\n","// Deprecated\n\n\"use strict\";\n\nmodule.exports = function (obj) {\n return typeof obj === \"function\";\n};\n","\"use strict\";\n\nvar _undefined = require(\"../function/noop\")(); // Support ES3 engines\n\nmodule.exports = function (val) {\n return (val !== _undefined) && (val !== null);\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")()\n\t? Object.keys\n\t: require(\"./shim\");\n","\"use strict\";\n\nmodule.exports = function () {\n\ttry {\n\t\tObject.keys(\"primitive\");\n\t\treturn true;\n\t} catch (e) {\n return false;\n}\n};\n","\"use strict\";\n\nvar isValue = require(\"../is-value\");\n\nvar keys = Object.keys;\n\nmodule.exports = function (object) {\n\treturn keys(isValue(object) ? Object(object) : object);\n};\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nvar forEach = Array.prototype.forEach, create = Object.create;\n\nvar process = function (src, obj) {\n\tvar key;\n\tfor (key in src) obj[key] = src[key];\n};\n\n// eslint-disable-next-line no-unused-vars\nmodule.exports = function (opts1 /*, …options*/) {\n\tvar result = create(null);\n\tforEach.call(arguments, function (options) {\n\t\tif (!isValue(options)) return;\n\t\tprocess(Object(options), result);\n\t});\n\treturn result;\n};\n","\"use strict\";\n\nmodule.exports = function (fn) {\n\tif (typeof fn !== \"function\") throw new TypeError(fn + \" is not a function\");\n\treturn fn;\n};\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) throw new TypeError(\"Cannot use null or undefined\");\n\treturn value;\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")()\n\t? String.prototype.contains\n\t: require(\"./shim\");\n","\"use strict\";\n\nvar str = \"razdwatrzy\";\n\nmodule.exports = function () {\n\tif (typeof str.contains !== \"function\") return false;\n\treturn (str.contains(\"dwa\") === true) && (str.contains(\"foo\") === false);\n};\n","\"use strict\";\n\nvar indexOf = String.prototype.indexOf;\n\nmodule.exports = function (searchString/*, position*/) {\n\treturn indexOf.call(this, searchString, arguments[1]) > -1;\n};\n","'use strict';\n\nvar d        = require('d')\n  , callable = require('es5-ext/object/valid-callable')\n\n  , apply = Function.prototype.apply, call = Function.prototype.call\n  , create = Object.create, defineProperty = Object.defineProperty\n  , defineProperties = Object.defineProperties\n  , hasOwnProperty = Object.prototype.hasOwnProperty\n  , descriptor = { configurable: true, enumerable: false, writable: true }\n\n  , on, once, off, emit, methods, descriptors, base;\n\non = function (type, listener) {\n\tvar data;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) {\n\t\tdata = descriptor.value = create(null);\n\t\tdefineProperty(this, '__ee__', descriptor);\n\t\tdescriptor.value = null;\n\t} else {\n\t\tdata = this.__ee__;\n\t}\n\tif (!data[type]) data[type] = listener;\n\telse if (typeof data[type] === 'object') data[type].push(listener);\n\telse data[type] = [data[type], listener];\n\n\treturn this;\n};\n\nonce = function (type, listener) {\n\tvar once, self;\n\n\tcallable(listener);\n\tself = this;\n\ton.call(this, type, once = function () {\n\t\toff.call(self, type, once);\n\t\tapply.call(listener, this, arguments);\n\t});\n\n\tonce.__eeOnceListener__ = listener;\n\treturn this;\n};\n\noff = function (type, listener) {\n\tvar data, listeners, candidate, i;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return this;\n\tdata = this.__ee__;\n\tif (!data[type]) return this;\n\tlisteners = data[type];\n\n\tif (typeof listeners === 'object') {\n\t\tfor (i = 0; (candidate = listeners[i]); ++i) {\n\t\t\tif ((candidate === listener) ||\n\t\t\t\t\t(candidate.__eeOnceListener__ === listener)) {\n\t\t\t\tif (listeners.length === 2) data[type] = listeners[i ? 0 : 1];\n\t\t\t\telse listeners.splice(i, 1);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif ((listeners === listener) ||\n\t\t\t\t(listeners.__eeOnceListener__ === listener)) {\n\t\t\tdelete data[type];\n\t\t}\n\t}\n\n\treturn this;\n};\n\nemit = function (type) {\n\tvar i, l, listener, listeners, args;\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return;\n\tlisteners = this.__ee__[type];\n\tif (!listeners) return;\n\n\tif (typeof listeners === 'object') {\n\t\tl = arguments.length;\n\t\targs = new Array(l - 1);\n\t\tfor (i = 1; i < l; ++i) args[i - 1] = arguments[i];\n\n\t\tlisteners = listeners.slice();\n\t\tfor (i = 0; (listener = listeners[i]); ++i) {\n\t\t\tapply.call(listener, this, args);\n\t\t}\n\t} else {\n\t\tswitch (arguments.length) {\n\t\tcase 1:\n\t\t\tcall.call(listeners, this);\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tcall.call(listeners, this, arguments[1]);\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tcall.call(listeners, this, arguments[1], arguments[2]);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tl = arguments.length;\n\t\t\targs = new Array(l - 1);\n\t\t\tfor (i = 1; i < l; ++i) {\n\t\t\t\targs[i - 1] = arguments[i];\n\t\t\t}\n\t\t\tapply.call(listeners, this, args);\n\t\t}\n\t}\n};\n\nmethods = {\n\ton: on,\n\tonce: once,\n\toff: off,\n\temit: emit\n};\n\ndescriptors = {\n\ton: d(on),\n\tonce: d(once),\n\toff: d(off),\n\temit: d(emit)\n};\n\nbase = defineProperties({}, descriptors);\n\nmodule.exports = exports = function (o) {\n\treturn (o == null) ? create(base) : defineProperties(Object(o), descriptors);\n};\nexports.methods = methods;\n","module.exports={\":D\":\"😀\",\"':D\":\"😅\",\"xD\":\"😆\",\";)\":\"😉\",\"^^\":\"😊\",\":p\":\"😋\",\"8)\":\"😎\",\":*\":\"😘\",\":3\":\"😗\",\":)\":\"🙂\",\":?\":\"🤔\",\":|\":\"😐\",\"-_-\":\"😑\",\":x\":\"😶\",\":X\":\"😶\",\"|-(\":\"🙄\",\":O\":\"😮\",\":o\":\"😯\",\"D:\":\"😫\",\"|-)\":\"😴\",\":P\":\"😛\",\";P\":\"😜\",\":/\":\"😕\",\"(:\":\"🙃\",\"8O\":\"😲\",\":(\":\"🙁\",\";(\":\"😢\",\":@\":\"🤬\",\">:)\":\"😈\",\"<3\":\"❤️\"};","/* jshint browser: true */\n\n(function () {\n\n// The properties that we copy into a mirrored div.\n// Note that some browsers, such as Firefox,\n// do not concatenate properties, i.e. padding-top, bottom etc. -> padding,\n// so we have to do every single property specifically.\nvar properties = [\n  'direction',  // RTL support\n  'boxSizing',\n  'width',  // on Chrome and IE, exclude the scrollbar, so the mirror div wraps exactly as the textarea does\n  'height',\n  'overflowX',\n  'overflowY',  // copy the scrollbar for IE\n\n  'borderTopWidth',\n  'borderRightWidth',\n  'borderBottomWidth',\n  'borderLeftWidth',\n  'borderStyle',\n\n  'paddingTop',\n  'paddingRight',\n  'paddingBottom',\n  'paddingLeft',\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/font\n  'fontStyle',\n  'fontVariant',\n  'fontWeight',\n  'fontStretch',\n  'fontSize',\n  'fontSizeAdjust',\n  'lineHeight',\n  'fontFamily',\n\n  'textAlign',\n  'textTransform',\n  'textIndent',\n  'textDecoration',  // might not make a difference, but better be safe\n\n  'letterSpacing',\n  'wordSpacing',\n\n  'tabSize',\n  'MozTabSize'\n\n];\n\nvar isBrowser = (typeof window !== 'undefined');\nvar isFirefox = (isBrowser && window.mozInnerScreenX != null);\n\nfunction getCaretCoordinates(element, position, options) {\n  if(!isBrowser) {\n    throw new Error('textarea-caret-position#getCaretCoordinates should only be called in a browser');\n  }\n\n  var debug = options && options.debug || false;\n  if (debug) {\n    var el = document.querySelector('#input-textarea-caret-position-mirror-div');\n    if ( el ) { el.parentNode.removeChild(el); }\n  }\n\n  // mirrored div\n  var div = document.createElement('div');\n  div.id = 'input-textarea-caret-position-mirror-div';\n  document.body.appendChild(div);\n\n  var style = div.style;\n  var computed = window.getComputedStyle? getComputedStyle(element) : element.currentStyle;  // currentStyle for IE < 9\n\n  // default textarea styles\n  style.whiteSpace = 'pre-wrap';\n  if (element.nodeName !== 'INPUT')\n    style.wordWrap = 'break-word';  // only for textarea-s\n\n  // position off-screen\n  style.position = 'absolute';  // required to return coordinates properly\n  if (!debug)\n    style.visibility = 'hidden';  // not 'display: none' because we want rendering\n\n  // transfer the element's properties to the div\n  properties.forEach(function (prop) {\n    style[prop] = computed[prop];\n  });\n\n  if (isFirefox) {\n    // Firefox lies about the overflow property for textareas: https://bugzilla.mozilla.org/show_bug.cgi?id=984275\n    if (element.scrollHeight > parseInt(computed.height))\n      style.overflowY = 'scroll';\n  } else {\n    style.overflow = 'hidden';  // for Chrome to not render a scrollbar; IE keeps overflowY = 'scroll'\n  }\n\n  div.textContent = element.value.substring(0, position);\n  // the second special handling for input type=\"text\" vs textarea: spaces need to be replaced with non-breaking spaces - http://stackoverflow.com/a/13402035/1269037\n  if (element.nodeName === 'INPUT')\n    div.textContent = div.textContent.replace(/\\s/g, '\\u00a0');\n\n  var span = document.createElement('span');\n  // Wrapping must be replicated *exactly*, including when a long word gets\n  // onto the next line, with whitespace at the end of the line before (#7).\n  // The  *only* reliable way to do that is to copy the *entire* rest of the\n  // textarea's content into the <span> created at the caret position.\n  // for inputs, just '.' would be enough, but why bother?\n  span.textContent = element.value.substring(position) || '.';  // || because a completely empty faux span doesn't render at all\n  div.appendChild(span);\n\n  var coordinates = {\n    top: span.offsetTop + parseInt(computed['borderTopWidth']),\n    left: span.offsetLeft + parseInt(computed['borderLeftWidth'])\n  };\n\n  if (debug) {\n    span.style.backgroundColor = '#aaa';\n  } else {\n    document.body.removeChild(div);\n  }\n\n  return coordinates;\n}\n\nif (typeof module != 'undefined' && typeof module.exports != 'undefined') {\n  module.exports = getCaretCoordinates;\n} else if(isBrowser){\n  window.getCaretCoordinates = getCaretCoordinates;\n}\n\n}());\n","var location = global.location || {};\n/*jslint indent: 2, browser: true, bitwise: true, plusplus: true */\nvar twemoji = (function (\n  /*! Copyright Twitter Inc. and other contributors. Licensed under MIT *//*\n    https://github.com/twitter/twemoji/blob/gh-pages/LICENSE\n  */\n\n  // WARNING:   this file is generated automatically via\n  //            `node twemoji-generator.js`\n  //            please update its `createTwemoji` function\n  //            at the bottom of the same file instead.\n\n) {\n  'use strict';\n\n  /*jshint maxparams:4 */\n\n  var\n    // the exported module object\n    twemoji = {\n\n\n    /////////////////////////\n    //      properties     //\n    /////////////////////////\n\n      // default assets url, by default will be Twitter Inc. CDN\n      base: 'https://twemoji.maxcdn.com/2/',\n\n      // default assets file extensions, by default '.png'\n      ext: '.png',\n\n      // default assets/folder size, by default \"72x72\"\n      // available via Twitter CDN: 72\n      size: '72x72',\n\n      // default class name, by default 'emoji'\n      className: 'emoji',\n\n      // basic utilities / helpers to convert code points\n      // to JavaScript surrogates and vice versa\n      convert: {\n\n        /**\n         * Given an HEX codepoint, returns UTF16 surrogate pairs.\n         *\n         * @param   string  generic codepoint, i.e. '1F4A9'\n         * @return  string  codepoint transformed into utf16 surrogates pair,\n         *          i.e. \\uD83D\\uDCA9\n         *\n         * @example\n         *  twemoji.convert.fromCodePoint('1f1e8');\n         *  // \"\\ud83c\\udde8\"\n         *\n         *  '1f1e8-1f1f3'.split('-').map(twemoji.convert.fromCodePoint).join('')\n         *  // \"\\ud83c\\udde8\\ud83c\\uddf3\"\n         */\n        fromCodePoint: fromCodePoint,\n\n        /**\n         * Given UTF16 surrogate pairs, returns the equivalent HEX codepoint.\n         *\n         * @param   string  generic utf16 surrogates pair, i.e. \\uD83D\\uDCA9\n         * @param   string  optional separator for double code points, default='-'\n         * @return  string  utf16 transformed into codepoint, i.e. '1F4A9'\n         *\n         * @example\n         *  twemoji.convert.toCodePoint('\\ud83c\\udde8\\ud83c\\uddf3');\n         *  // \"1f1e8-1f1f3\"\n         *\n         *  twemoji.convert.toCodePoint('\\ud83c\\udde8\\ud83c\\uddf3', '~');\n         *  // \"1f1e8~1f1f3\"\n         */\n        toCodePoint: toCodePoint\n      },\n\n\n    /////////////////////////\n    //       methods       //\n    /////////////////////////\n\n      /**\n       * User first: used to remove missing images\n       * preserving the original text intent when\n       * a fallback for network problems is desired.\n       * Automatically added to Image nodes via DOM\n       * It could be recycled for string operations via:\n       *  $('img.emoji').on('error', twemoji.onerror)\n       */\n      onerror: function onerror() {\n        if (this.parentNode) {\n          this.parentNode.replaceChild(createText(this.alt, false), this);\n        }\n      },\n\n      /**\n       * Main method/logic to generate either <img> tags or HTMLImage nodes.\n       *  \"emojify\" a generic text or DOM Element.\n       *\n       * @overloads\n       *\n       * String replacement for `innerHTML` or server side operations\n       *  twemoji.parse(string);\n       *  twemoji.parse(string, Function);\n       *  twemoji.parse(string, Object);\n       *\n       * HTMLElement tree parsing for safer operations over existing DOM\n       *  twemoji.parse(HTMLElement);\n       *  twemoji.parse(HTMLElement, Function);\n       *  twemoji.parse(HTMLElement, Object);\n       *\n       * @param   string|HTMLElement  the source to parse and enrich with emoji.\n       *\n       *          string              replace emoji matches with <img> tags.\n       *                              Mainly used to inject emoji via `innerHTML`\n       *                              It does **not** parse the string or validate it,\n       *                              it simply replaces found emoji with a tag.\n       *                              NOTE: be sure this won't affect security.\n       *\n       *          HTMLElement         walk through the DOM tree and find emoji\n       *                              that are inside **text node only** (nodeType === 3)\n       *                              Mainly used to put emoji in already generated DOM\n       *                              without compromising surrounding nodes and\n       *                              **avoiding** the usage of `innerHTML`.\n       *                              NOTE: Using DOM elements instead of strings should\n       *                              improve security without compromising too much\n       *                              performance compared with a less safe `innerHTML`.\n       *\n       * @param   Function|Object  [optional]\n       *                              either the callback that will be invoked or an object\n       *                              with all properties to use per each found emoji.\n       *\n       *          Function            if specified, this will be invoked per each emoji\n       *                              that has been found through the RegExp except\n       *                              those follwed by the invariant \\uFE0E (\"as text\").\n       *                              Once invoked, parameters will be:\n       *\n       *                                iconId:string     the lower case HEX code point\n       *                                                  i.e. \"1f4a9\"\n       *\n       *                                options:Object    all info for this parsing operation\n       *\n       *                                variant:char      the optional \\uFE0F (\"as image\")\n       *                                                  variant, in case this info\n       *                                                  is anyhow meaningful.\n       *                                                  By default this is ignored.\n       *\n       *                              If such callback will return a falsy value instead\n       *                              of a valid `src` to use for the image, nothing will\n       *                              actually change for that specific emoji.\n       *\n       *\n       *          Object              if specified, an object containing the following properties\n       *\n       *            callback   Function  the callback to invoke per each found emoji.\n       *            base       string    the base url, by default twemoji.base\n       *            ext        string    the image extension, by default twemoji.ext\n       *            size       string    the assets size, by default twemoji.size\n       *\n       * @example\n       *\n       *  twemoji.parse(\"I \\u2764\\uFE0F emoji!\");\n       *  // I <img class=\"emoji\" draggable=\"false\" alt=\"❤️\" src=\"/assets/2764.gif\"/> emoji!\n       *\n       *\n       *  twemoji.parse(\"I \\u2764\\uFE0F emoji!\", function(iconId, options) {\n       *    return '/assets/' + iconId + '.gif';\n       *  });\n       *  // I <img class=\"emoji\" draggable=\"false\" alt=\"❤️\" src=\"/assets/2764.gif\"/> emoji!\n       *\n       *\n       * twemoji.parse(\"I \\u2764\\uFE0F emoji!\", {\n       *   size: 72,\n       *   callback: function(iconId, options) {\n       *     return '/assets/' + options.size + '/' + iconId + options.ext;\n       *   }\n       * });\n       *  // I <img class=\"emoji\" draggable=\"false\" alt=\"❤️\" src=\"/assets/72x72/2764.png\"/> emoji!\n       *\n       */\n      parse: parse,\n\n      /**\n       * Given a string, invokes the callback argument\n       *  per each emoji found in such string.\n       * This is the most raw version used by\n       *  the .parse(string) method itself.\n       *\n       * @param   string    generic string to parse\n       * @param   Function  a generic callback that will be\n       *                    invoked to replace the content.\n       *                    This calback wil receive standard\n       *                    String.prototype.replace(str, callback)\n       *                    arguments such:\n       *  callback(\n       *    rawText,  // the emoji match\n       *  );\n       *\n       *                    and others commonly received via replace.\n       */\n      replace: replace,\n\n      /**\n       * Simplify string tests against emoji.\n       *\n       * @param   string  some text that might contain emoji\n       * @return  boolean true if any emoji was found, false otherwise.\n       *\n       * @example\n       *\n       *  if (twemoji.test(someContent)) {\n       *    console.log(\"emoji All The Things!\");\n       *  }\n       */\n      test: test\n    },\n\n    // used to escape HTML special chars in attributes\n    escaper = {\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      \"'\": '&#39;',\n      '\"': '&quot;'\n    },\n\n    // RegExp based on emoji's official Unicode standards\n    // http://www.unicode.org/Public/UNIDATA/EmojiSources.txt\n    re = /\\ud83d[\\udc68-\\udc69](?:\\ud83c[\\udffb-\\udfff])?\\u200d(?:\\u2695\\ufe0f|\\u2696\\ufe0f|\\u2708\\ufe0f|\\ud83c[\\udf3e\\udf73\\udf93\\udfa4\\udfa8\\udfeb\\udfed]|\\ud83d[\\udcbb\\udcbc\\udd27\\udd2c\\ude80\\ude92])|(?:\\ud83c[\\udfcb\\udfcc]|\\ud83d\\udd75|\\u26f9)(?:\\ufe0f|\\ud83c[\\udffb-\\udfff])\\u200d[\\u2640\\u2642]\\ufe0f|(?:\\ud83c[\\udfc3\\udfc4\\udfca]|\\ud83d[\\udc6e\\udc71\\udc73\\udc77\\udc81\\udc82\\udc86\\udc87\\ude45-\\ude47\\ude4b\\ude4d\\ude4e\\udea3\\udeb4-\\udeb6]|\\ud83e[\\udd26\\udd37-\\udd39\\udd3d\\udd3e\\uddd6-\\udddd])(?:\\ud83c[\\udffb-\\udfff])?\\u200d[\\u2640\\u2642]\\ufe0f|\\ud83d\\udc68\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68|\\ud83d\\udc68\\u200d\\ud83d\\udc68\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc68\\u200d\\ud83d\\udc68\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc68\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d[\\udc68\\udc69]|\\ud83d\\udc69\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc69\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68|\\ud83d\\udc68\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc68\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\ud83d\\udc68\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\ud83d\\udc69\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\u2764\\ufe0f\\u200d\\ud83d[\\udc68\\udc69]|\\ud83d\\udc69\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc69\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\ud83d\\udc69\\u200d\\ud83d[\\udc66\\udc67]|\\ud83c\\udff3\\ufe0f\\u200d\\ud83c\\udf08|\\ud83c\\udff4\\u200d\\u2620\\ufe0f|\\ud83d\\udc41\\u200d\\ud83d\\udde8|\\ud83d\\udc68\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc6f\\u200d\\u2640\\ufe0f|\\ud83d\\udc6f\\u200d\\u2642\\ufe0f|\\ud83e\\udd3c\\u200d\\u2640\\ufe0f|\\ud83e\\udd3c\\u200d\\u2642\\ufe0f|\\ud83e\\uddde\\u200d\\u2640\\ufe0f|\\ud83e\\uddde\\u200d\\u2642\\ufe0f|\\ud83e\\udddf\\u200d\\u2640\\ufe0f|\\ud83e\\udddf\\u200d\\u2642\\ufe0f|(?:[\\u0023\\u002a\\u0030-\\u0039])\\ufe0f?\\u20e3|(?:(?:\\ud83c[\\udfcb\\udfcc]|\\ud83d[\\udd74\\udd75\\udd90]|[\\u261d\\u26f7\\u26f9\\u270c\\u270d])(?:\\ufe0f|(?!\\ufe0e))|\\ud83c[\\udf85\\udfc2-\\udfc4\\udfc7\\udfca]|\\ud83d[\\udc42\\udc43\\udc46-\\udc50\\udc66-\\udc69\\udc6e\\udc70-\\udc78\\udc7c\\udc81-\\udc83\\udc85-\\udc87\\udcaa\\udd7a\\udd95\\udd96\\ude45-\\ude47\\ude4b-\\ude4f\\udea3\\udeb4-\\udeb6\\udec0\\udecc]|\\ud83e[\\udd18-\\udd1c\\udd1e\\udd1f\\udd26\\udd30-\\udd39\\udd3d\\udd3e\\uddd1-\\udddd]|[\\u270a\\u270b])(?:\\ud83c[\\udffb-\\udfff]|)|\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40\\udc65\\udb40\\udc6e\\udb40\\udc67\\udb40\\udc7f|\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40\\udc73\\udb40\\udc63\\udb40\\udc74\\udb40\\udc7f|\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40\\udc77\\udb40\\udc6c\\udb40\\udc73\\udb40\\udc7f|\\ud83c\\udde6\\ud83c[\\udde8-\\uddec\\uddee\\uddf1\\uddf2\\uddf4\\uddf6-\\uddfa\\uddfc\\uddfd\\uddff]|\\ud83c\\udde7\\ud83c[\\udde6\\udde7\\udde9-\\uddef\\uddf1-\\uddf4\\uddf6-\\uddf9\\uddfb\\uddfc\\uddfe\\uddff]|\\ud83c\\udde8\\ud83c[\\udde6\\udde8\\udde9\\uddeb-\\uddee\\uddf0-\\uddf5\\uddf7\\uddfa-\\uddff]|\\ud83c\\udde9\\ud83c[\\uddea\\uddec\\uddef\\uddf0\\uddf2\\uddf4\\uddff]|\\ud83c\\uddea\\ud83c[\\udde6\\udde8\\uddea\\uddec\\udded\\uddf7-\\uddfa]|\\ud83c\\uddeb\\ud83c[\\uddee-\\uddf0\\uddf2\\uddf4\\uddf7]|\\ud83c\\uddec\\ud83c[\\udde6\\udde7\\udde9-\\uddee\\uddf1-\\uddf3\\uddf5-\\uddfa\\uddfc\\uddfe]|\\ud83c\\udded\\ud83c[\\uddf0\\uddf2\\uddf3\\uddf7\\uddf9\\uddfa]|\\ud83c\\uddee\\ud83c[\\udde8-\\uddea\\uddf1-\\uddf4\\uddf6-\\uddf9]|\\ud83c\\uddef\\ud83c[\\uddea\\uddf2\\uddf4\\uddf5]|\\ud83c\\uddf0\\ud83c[\\uddea\\uddec-\\uddee\\uddf2\\uddf3\\uddf5\\uddf7\\uddfc\\uddfe\\uddff]|\\ud83c\\uddf1\\ud83c[\\udde6-\\udde8\\uddee\\uddf0\\uddf7-\\uddfb\\uddfe]|\\ud83c\\uddf2\\ud83c[\\udde6\\udde8-\\udded\\uddf0-\\uddff]|\\ud83c\\uddf3\\ud83c[\\udde6\\udde8\\uddea-\\uddec\\uddee\\uddf1\\uddf4\\uddf5\\uddf7\\uddfa\\uddff]|\\ud83c\\uddf4\\ud83c\\uddf2|\\ud83c\\uddf5\\ud83c[\\udde6\\uddea-\\udded\\uddf0-\\uddf3\\uddf7-\\uddf9\\uddfc\\uddfe]|\\ud83c\\uddf6\\ud83c\\udde6|\\ud83c\\uddf7\\ud83c[\\uddea\\uddf4\\uddf8\\uddfa\\uddfc]|\\ud83c\\uddf8\\ud83c[\\udde6-\\uddea\\uddec-\\uddf4\\uddf7-\\uddf9\\uddfb\\uddfd-\\uddff]|\\ud83c\\uddf9\\ud83c[\\udde6\\udde8\\udde9\\uddeb-\\udded\\uddef-\\uddf4\\uddf7\\uddf9\\uddfb\\uddfc\\uddff]|\\ud83c\\uddfa\\ud83c[\\udde6\\uddec\\uddf2\\uddf3\\uddf8\\uddfe\\uddff]|\\ud83c\\uddfb\\ud83c[\\udde6\\udde8\\uddea\\uddec\\uddee\\uddf3\\uddfa]|\\ud83c\\uddfc\\ud83c[\\uddeb\\uddf8]|\\ud83c\\uddfd\\ud83c\\uddf0|\\ud83c\\uddfe\\ud83c[\\uddea\\uddf9]|\\ud83c\\uddff\\ud83c[\\udde6\\uddf2\\uddfc]|\\ud800\\udc00|\\ud83c[\\udccf\\udd8e\\udd91-\\udd9a\\udde6-\\uddff\\ude01\\ude32-\\ude36\\ude38-\\ude3a\\ude50\\ude51\\udf00-\\udf20\\udf2d-\\udf35\\udf37-\\udf7c\\udf7e-\\udf84\\udf86-\\udf93\\udfa0-\\udfc1\\udfc5\\udfc6\\udfc8\\udfc9\\udfcf-\\udfd3\\udfe0-\\udff0\\udff4\\udff8-\\udfff]|\\ud83d[\\udc00-\\udc3e\\udc40\\udc44\\udc45\\udc51-\\udc65\\udc6a-\\udc6d\\udc6f\\udc79-\\udc7b\\udc7d-\\udc80\\udc84\\udc88-\\udca9\\udcab-\\udcfc\\udcff-\\udd3d\\udd4b-\\udd4e\\udd50-\\udd67\\udda4\\uddfb-\\ude44\\ude48-\\ude4a\\ude80-\\udea2\\udea4-\\udeb3\\udeb7-\\udebf\\udec1-\\udec5\\uded0-\\uded2\\udeeb\\udeec\\udef4-\\udef8]|\\ud83e[\\udd10-\\udd17\\udd1d\\udd20-\\udd25\\udd27-\\udd2f\\udd3a\\udd3c\\udd40-\\udd45\\udd47-\\udd4c\\udd50-\\udd6b\\udd80-\\udd97\\uddc0\\uddd0\\uddde-\\udde6]|[\\u23e9-\\u23ec\\u23f0\\u23f3\\u2640\\u2642\\u2695\\u26ce\\u2705\\u2728\\u274c\\u274e\\u2753-\\u2755\\u2795-\\u2797\\u27b0\\u27bf\\ue50a]|(?:\\ud83c[\\udc04\\udd70\\udd71\\udd7e\\udd7f\\ude02\\ude1a\\ude2f\\ude37\\udf21\\udf24-\\udf2c\\udf36\\udf7d\\udf96\\udf97\\udf99-\\udf9b\\udf9e\\udf9f\\udfcd\\udfce\\udfd4-\\udfdf\\udff3\\udff5\\udff7]|\\ud83d[\\udc3f\\udc41\\udcfd\\udd49\\udd4a\\udd6f\\udd70\\udd73\\udd76-\\udd79\\udd87\\udd8a-\\udd8d\\udda5\\udda8\\uddb1\\uddb2\\uddbc\\uddc2-\\uddc4\\uddd1-\\uddd3\\udddc-\\uddde\\udde1\\udde3\\udde8\\uddef\\uddf3\\uddfa\\udecb\\udecd-\\udecf\\udee0-\\udee5\\udee9\\udef0\\udef3]|[\\u00a9\\u00ae\\u203c\\u2049\\u2122\\u2139\\u2194-\\u2199\\u21a9\\u21aa\\u231a\\u231b\\u2328\\u23cf\\u23ed-\\u23ef\\u23f1\\u23f2\\u23f8-\\u23fa\\u24c2\\u25aa\\u25ab\\u25b6\\u25c0\\u25fb-\\u25fe\\u2600-\\u2604\\u260e\\u2611\\u2614\\u2615\\u2618\\u2620\\u2622\\u2623\\u2626\\u262a\\u262e\\u262f\\u2638-\\u263a\\u2648-\\u2653\\u2660\\u2663\\u2665\\u2666\\u2668\\u267b\\u267f\\u2692-\\u2694\\u2696\\u2697\\u2699\\u269b\\u269c\\u26a0\\u26a1\\u26aa\\u26ab\\u26b0\\u26b1\\u26bd\\u26be\\u26c4\\u26c5\\u26c8\\u26cf\\u26d1\\u26d3\\u26d4\\u26e9\\u26ea\\u26f0-\\u26f5\\u26f8\\u26fa\\u26fd\\u2702\\u2708\\u2709\\u270f\\u2712\\u2714\\u2716\\u271d\\u2721\\u2733\\u2734\\u2744\\u2747\\u2757\\u2763\\u2764\\u27a1\\u2934\\u2935\\u2b05-\\u2b07\\u2b1b\\u2b1c\\u2b50\\u2b55\\u3030\\u303d\\u3297\\u3299])(?:\\ufe0f|(?!\\ufe0e))/g,\n\n    // avoid runtime RegExp creation for not so smart,\n    // not JIT based, and old browsers / engines\n    UFE0Fg = /\\uFE0F/g,\n\n    // avoid using a string literal like '\\u200D' here because minifiers expand it inline\n    U200D = String.fromCharCode(0x200D),\n\n    // used to find HTML special chars in attributes\n    rescaper = /[&<>'\"]/g,\n\n    // nodes with type 1 which should **not** be parsed\n    shouldntBeParsed = /^(?:iframe|noframes|noscript|script|select|style|textarea)$/,\n\n    // just a private shortcut\n    fromCharCode = String.fromCharCode;\n\n  return twemoji;\n\n\n  /////////////////////////\n  //  private functions  //\n  //     declaration     //\n  /////////////////////////\n\n  /**\n   * Shortcut to create text nodes\n   * @param   string  text used to create DOM text node\n   * @return  Node  a DOM node with that text\n   */\n  function createText(text, clean) {\n    return document.createTextNode(clean ? text.replace(UFE0Fg, '') : text);\n  }\n\n  /**\n   * Utility function to escape html attribute text\n   * @param   string  text use in HTML attribute\n   * @return  string  text encoded to use in HTML attribute\n   */\n  function escapeHTML(s) {\n    return s.replace(rescaper, replacer);\n  }\n\n  /**\n   * Default callback used to generate emoji src\n   *  based on Twitter CDN\n   * @param   string    the emoji codepoint string\n   * @param   string    the default size to use, i.e. \"36x36\"\n   * @return  string    the image source to use\n   */\n  function defaultImageSrcGenerator(icon, options) {\n    return ''.concat(options.base, options.size, '/', icon, options.ext);\n  }\n\n  /**\n   * Given a generic DOM nodeType 1, walk through all children\n   * and store every nodeType 3 (#text) found in the tree.\n   * @param   Element a DOM Element with probably some text in it\n   * @param   Array the list of previously discovered text nodes\n   * @return  Array same list with new discovered nodes, if any\n   */\n  function grabAllTextNodes(node, allText) {\n    var\n      childNodes = node.childNodes,\n      length = childNodes.length,\n      subnode,\n      nodeType;\n    while (length--) {\n      subnode = childNodes[length];\n      nodeType = subnode.nodeType;\n      // parse emoji only in text nodes\n      if (nodeType === 3) {\n        // collect them to process emoji later\n        allText.push(subnode);\n      }\n      // ignore all nodes that are not type 1, that are svg, or that\n      // should not be parsed as script, style, and others\n      else if (nodeType === 1 && !('ownerSVGElement' in subnode) &&\n          !shouldntBeParsed.test(subnode.nodeName.toLowerCase())) {\n        grabAllTextNodes(subnode, allText);\n      }\n    }\n    return allText;\n  }\n\n  /**\n   * Used to both remove the possible variant\n   *  and to convert utf16 into code points.\n   *  If there is a zero-width-joiner (U+200D), leave the variants in.\n   * @param   string    the raw text of the emoji match\n   * @return  string    the code point\n   */\n  function grabTheRightIcon(rawText) {\n    // if variant is present as \\uFE0F\n    return toCodePoint(rawText.indexOf(U200D) < 0 ?\n      rawText.replace(UFE0Fg, '') :\n      rawText\n    );\n  }\n\n  /**\n   * DOM version of the same logic / parser:\n   *  emojify all found sub-text nodes placing images node instead.\n   * @param   Element   generic DOM node with some text in some child node\n   * @param   Object    options  containing info about how to parse\n    *\n    *            .callback   Function  the callback to invoke per each found emoji.\n    *            .base       string    the base url, by default twemoji.base\n    *            .ext        string    the image extension, by default twemoji.ext\n    *            .size       string    the assets size, by default twemoji.size\n    *\n   * @return  Element same generic node with emoji in place, if any.\n   */\n  function parseNode(node, options) {\n    var\n      allText = grabAllTextNodes(node, []),\n      length = allText.length,\n      attrib,\n      attrname,\n      modified,\n      fragment,\n      subnode,\n      text,\n      match,\n      i,\n      index,\n      img,\n      rawText,\n      iconId,\n      src;\n    while (length--) {\n      modified = false;\n      fragment = document.createDocumentFragment();\n      subnode = allText[length];\n      text = subnode.nodeValue;\n      i = 0;\n      while ((match = re.exec(text))) {\n        index = match.index;\n        if (index !== i) {\n          fragment.appendChild(\n            createText(text.slice(i, index), true)\n          );\n        }\n        rawText = match[0];\n        iconId = grabTheRightIcon(rawText);\n        i = index + rawText.length;\n        src = options.callback(iconId, options);\n        if (src) {\n          img = new Image();\n          img.onerror = options.onerror;\n          img.setAttribute('draggable', 'false');\n          attrib = options.attributes(rawText, iconId);\n          for (attrname in attrib) {\n            if (\n              attrib.hasOwnProperty(attrname) &&\n              // don't allow any handlers to be set + don't allow overrides\n              attrname.indexOf('on') !== 0 &&\n              !img.hasAttribute(attrname)\n            ) {\n              img.setAttribute(attrname, attrib[attrname]);\n            }\n          }\n          img.className = options.className;\n          img.alt = rawText;\n          img.src = src;\n          modified = true;\n          fragment.appendChild(img);\n        }\n        if (!img) fragment.appendChild(createText(rawText, false));\n        img = null;\n      }\n      // is there actually anything to replace in here ?\n      if (modified) {\n        // any text left to be added ?\n        if (i < text.length) {\n          fragment.appendChild(\n            createText(text.slice(i), true)\n          );\n        }\n        // replace the text node only, leave intact\n        // anything else surrounding such text\n        subnode.parentNode.replaceChild(fragment, subnode);\n      }\n    }\n    return node;\n  }\n\n  /**\n   * String/HTML version of the same logic / parser:\n   *  emojify a generic text placing images tags instead of surrogates pair.\n   * @param   string    generic string with possibly some emoji in it\n   * @param   Object    options  containing info about how to parse\n   *\n   *            .callback   Function  the callback to invoke per each found emoji.\n   *            .base       string    the base url, by default twemoji.base\n   *            .ext        string    the image extension, by default twemoji.ext\n   *            .size       string    the assets size, by default twemoji.size\n   *\n   * @return  the string with <img tags> replacing all found and parsed emoji\n   */\n  function parseString(str, options) {\n    return replace(str, function (rawText) {\n      var\n        ret = rawText,\n        iconId = grabTheRightIcon(rawText),\n        src = options.callback(iconId, options),\n        attrib,\n        attrname;\n      if (src) {\n        // recycle the match string replacing the emoji\n        // with its image counter part\n        ret = '<img '.concat(\n          'class=\"', options.className, '\" ',\n          'draggable=\"false\" ',\n          // needs to preserve user original intent\n          // when variants should be copied and pasted too\n          'alt=\"',\n          rawText,\n          '\"',\n          ' src=\"',\n          src,\n          '\"'\n        );\n        attrib = options.attributes(rawText, iconId);\n        for (attrname in attrib) {\n          if (\n            attrib.hasOwnProperty(attrname) &&\n            // don't allow any handlers to be set + don't allow overrides\n            attrname.indexOf('on') !== 0 &&\n            ret.indexOf(' ' + attrname + '=') === -1\n          ) {\n            ret = ret.concat(' ', attrname, '=\"', escapeHTML(attrib[attrname]), '\"');\n          }\n        }\n        ret = ret.concat('/>');\n      }\n      return ret;\n    });\n  }\n\n  /**\n   * Function used to actually replace HTML special chars\n   * @param   string  HTML special char\n   * @return  string  encoded HTML special char\n   */\n  function replacer(m) {\n    return escaper[m];\n  }\n\n  /**\n   * Default options.attribute callback\n   * @return  null\n   */\n  function returnNull() {\n    return null;\n  }\n\n  /**\n   * Given a generic value, creates its squared counterpart if it's a number.\n   *  As example, number 36 will return '36x36'.\n   * @param   any     a generic value.\n   * @return  any     a string representing asset size, i.e. \"36x36\"\n   *                  only in case the value was a number.\n   *                  Returns initial value otherwise.\n   */\n  function toSizeSquaredAsset(value) {\n    return typeof value === 'number' ?\n      value + 'x' + value :\n      value;\n  }\n\n\n  /////////////////////////\n  //  exported functions //\n  //     declaration     //\n  /////////////////////////\n\n  function fromCodePoint(codepoint) {\n    var code = typeof codepoint === 'string' ?\n          parseInt(codepoint, 16) : codepoint;\n    if (code < 0x10000) {\n      return fromCharCode(code);\n    }\n    code -= 0x10000;\n    return fromCharCode(\n      0xD800 + (code >> 10),\n      0xDC00 + (code & 0x3FF)\n    );\n  }\n\n  function parse(what, how) {\n    if (!how || typeof how === 'function') {\n      how = {callback: how};\n    }\n    // if first argument is string, inject html <img> tags\n    // otherwise use the DOM tree and parse text nodes only\n    return (typeof what === 'string' ? parseString : parseNode)(what, {\n      callback:   how.callback || defaultImageSrcGenerator,\n      attributes: typeof how.attributes === 'function' ? how.attributes : returnNull,\n      base:       typeof how.base === 'string' ? how.base : twemoji.base,\n      ext:        how.ext || twemoji.ext,\n      size:       how.folder || toSizeSquaredAsset(how.size || twemoji.size),\n      className:  how.className || twemoji.className,\n      onerror:    how.onerror || twemoji.onerror\n    });\n  }\n\n  function replace(text, callback) {\n    return String(text).replace(re, callback);\n  }\n\n  function test(text) {\n    // IE6 needs a reset before too\n    re.lastIndex = 0;\n    var result = re.test(text);\n    re.lastIndex = 0;\n    return result;\n  }\n\n  function toCodePoint(unicodeSurrogates, sep) {\n    var\n      r = [],\n      c = 0,\n      p = 0,\n      i = 0;\n    while (i < unicodeSurrogates.length) {\n      c = unicodeSurrogates.charCodeAt(i++);\n      if (p) {\n        r.push((0x10000 + ((p - 0xD800) << 10) + (c - 0xDC00)).toString(16));\n        p = 0;\n      } else if (0xD800 <= c && c <= 0xDBFF) {\n        p = c;\n      } else {\n        r.push(c.toString(16));\n      }\n    }\n    return r.join(sep || '-');\n  }\n\n}());\nif (!location.protocol) {\n  twemoji.base = twemoji.base.replace(/^http:/, \"\");\n}\nmodule.exports = twemoji;"]}